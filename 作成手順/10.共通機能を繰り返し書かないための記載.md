# ğŸ—‘ï¸ Reactã§å‰Šé™¤å‡¦ç†ã‚’å…±é€šåŒ–ï¼ˆhooks/DeletePost.jsxï¼‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€æŠ•ç¨¿å‰Šé™¤ã®å‡¦ç†ã‚’ `hooks/DeletePost.jsx` ã«å…±é€šåŒ–ã—ã€  
`PostList.jsx` ã‚„ `PostDetail.jsx` ãªã©è¤‡æ•°ã®ç”»é¢ã‹ã‚‰å‘¼ã³å‡ºã™æ§‹æˆã‚’è§£èª¬ã—ã¾ã™ã€‚

---

## âœ… 1. å‰Šé™¤å‡¦ç†ã®å…±é€šåŒ–

### ğŸ“ `src/hooks/DeletePost.jsx`

```jsx
import { useCallback } from 'react';

export function useDeletePost(onSuccess) {
  const deletePost = useCallback((id) => {
    if (!window.confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) return;

    fetch(`http://localhost:8080/api/posts/${id}`, {
      method: 'DELETE',
    })
      .then(() => {
        if (onSuccess) onSuccess(id);
      })
      .catch(error => {
        console.error("å‰Šé™¤å¤±æ•—:", error);
        alert("å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ");
      });
  }, [onSuccess]);

  return deletePost;
}
```

---

## âœ… 2. æŠ•ç¨¿ä¸€è¦§ç”»é¢ã§ã®ä½¿ç”¨ä¾‹

### ğŸ“ `src/Post/PostList.jsx`

```jsx
import React, { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';
import { useDeletePost } from '../hooks/DeletePost';

function PostList() {
  const [posts, setPosts] = useState([]);
  const deletePost = useDeletePost((id) => {
    setPosts(posts.filter(post => post.id !== id));
  });

  useEffect(() => {
    fetch("http://localhost:8080/api/posts")
      .then(res => res.json())
      .then(data => setPosts(data));
  }, []);

  return (
    <div>
      <h2>æŠ•ç¨¿ä¸€è¦§</h2>
      <ul>
        {posts.map(post => (
          <li key={post.id}>
            <strong>{post.title}</strong>
            <Link to={`/posts/show/${post.id}`}>è©³ç´°</Link>{' '}
            <Link to={`/posts/edit/${post.id}`}>ç·¨é›†</Link>{' '}
            <button onClick={() => deletePost(post.id)}>å‰Šé™¤</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default PostList;
```

---

## âœ… 3. æŠ•ç¨¿è©³ç´°ç”»é¢ã§ã®ä½¿ç”¨ä¾‹

### ğŸ“ `src/Post/PostDetail.jsx`

```jsx
import React, { useEffect, useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useDeletePost } from '../hooks/DeletePost';

function PostDetail() {
  const { id } = useParams();
  const navigate = useNavigate();
  const deletePost = useDeletePost(() => {
    navigate('/posts');
  });

  const [post, setPost] = useState(null);

  useEffect(() => {
    fetch(`http://localhost:8080/api/posts/${id}`)
      .then(res => res.json())
      .then(data => setPost(data));
  }, [id]);

  if (!post) return <p>èª­ã¿è¾¼ã¿ä¸­...</p>;

  return (
    <div>
      <h2>{post.title}</h2>
      <p>{post.content}</p>
      <p>æŠ•ç¨¿è€…ID: {post.userId}</p>
      <button onClick={() => deletePost(post.id)}>å‰Šé™¤</button>
    </div>
  );
}

export default PostDetail;
```

---

## âœ… ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆä¾‹ï¼‰

```
src/
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ DeletePost.jsx
â”œâ”€â”€ Post/
â”‚   â”œâ”€â”€ PostList.jsx
â”‚   â””â”€â”€ PostDetail.jsx
```

---

## ğŸ€ è£œè¶³

- `useDeletePost` ã«å‰Šé™¤æˆåŠŸå¾Œã®å‡¦ç†ã‚’ `onSuccess` ã¨ã—ã¦æ¸¡ã™å½¢å¼ãªã®ã§ã€ã©ã®ç”»é¢ã§ã‚‚æŸ”è»Ÿã«å‹•ä½œã‚’å¤‰ãˆã‚‰ã‚Œã¾ã™
- ãƒ•ãƒƒã‚¯åã¯ `useDeletePost` ã®ã‚ˆã†ã«å‘½åã—ã€ãƒ•ã‚¡ã‚¤ãƒ«åã¯ `DeletePost.jsx` ã§OKï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‘½åè¦å‰‡ã«åˆã‚ã›ã¦ï¼‰
- ä»–ã«ã‚‚ `CreatePost.jsx`, `UpdatePost.jsx` ãªã©ã«åˆ†ã‘ã¦æ•´ç†ã—ã¦ã„ãã¨ã‚¹ãƒƒã‚­ãƒªã—ã¾ã™â™¡

